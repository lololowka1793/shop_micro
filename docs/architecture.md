# Архитектура системы: Мини интернет-магазин

## Назначение системы

Система представляет собой мини интернет-магазин с простой архитектурой из нескольких микросервисов.  
Цель — потренироваться в построении микросервисной архитектуры, отказоустойчивости и взаимодействии сервисов между собой.

Пользователь (клиент) работает только с одним входом — **Gateway**, а остальные сервисы скрыты за ним.

---

## Список микросервисов и их ответственность

### 1. Gateway Service (`gateway`)

- Один общий вход для всех клиентов (фронтенд, Postman, мобильное приложение и т.п.).
- Принимает HTTP-запросы от клиента и перенаправляет их в нужные внутренние микросервисы.
- Может агрегировать ответы нескольких сервисов в один.
- Должен уметь **корректно обрабатывать ошибки** других сервисов (не падать, а возвращать частичный результат).

### 2. Auth Service (`auth`)

- Отвечает за аутентификацию пользователей.
- На первых этапах:
  - Принимает логин/пароль.
  - Возвращает **фейковый токен** (без реальной криптографии).
- В дальнейшем может быть расширен до полноценной JWT-авторизации.

### 3. Users Service (`users`)

- Управляет данными пользователей.
- Хранит информацию о пользователях (id, имя, email и т.п.).
- Предоставляет API для:
  - получения списка пользователей,
  - получения одного пользователя,
  - создания нового пользователя.

### 4. Catalog Service (`catalog`)

- Отвечает за товары интернет-магазина.
- Хранит список товаров (id, название, цена и т.п.).
- Предоставляет API для:
  - получения списка товаров,
  - получения информации о конкретном товаре.

### 5. Orders Service (`orders`)

- Отвечает за заказы.
- Хранит информацию о заказах (пользователь, товары, статусы).
- Предоставляет API для:
  - создания заказа,
  - получения списка заказов,
  - получения деталей конкретного заказа.
- В дальнейшем может работать вместе с платежами и уведомлениями.

### 6. Notifications Service (`notifications`

- Отвечает за отправку уведомлений (email, SMS, push и т.п.).
- На первых этапах просто будет "симулировать" отправку (например, выводить сообщение в консоль).
- **Не является критичным для работы системы**:
  - если сервис уведомлений не работает, заказы и другие функции должны продолжать работать,
  - просто уведомления временно не отправляются.

---

## Взаимодействие микросервисов (текстовая схема)

Основной поток взаимодействия:

- **Клиент → Gateway**
- **Gateway → Auth Service**
- **Gateway → Users Service**
- **Gateway → Catalog Service**
- **Gateway → Orders Service**
- **Gateway → Notifications Service**

Можно описать это так:

- Клиент никогда не обращается напрямую к `auth`, `users`, `catalog`, `orders`, `notifications`.
- Все внешние запросы идут только в `gateway`.
- `gateway` внутри обращается к нужным микросервисам по HTTP.

Пример возможных сценариев:

1. Авторизация:
   - Клиент → Gateway → Auth Service.

2. Просмотр списка товаров:
   - Клиент → Gateway → Catalog Service.

3. Создание заказа:
   - Клиент → Gateway → Orders Service (при необходимости Orders может дополнительно запрашивать Users и Catalog).

4. Отправка уведомления о создании заказа:
   - Orders Service → Notifications Service  
     (Если notifications недоступен — заказ всё равно создаётся, уведомление не отправляется).

---

## Критичность и отказоустойчивость микросервисов

Некоторые микросервисы являются более критичными, другие — менее:

### Критичные сервисы

- `gateway` — без него клиент не может работать с системой.
- `users` — важен для управления данными пользователей.
- `catalog` — важен для отображения товаров.
- `orders` — важен для создания и просмотра заказов.
- `auth` — критичен для защищённых операций (но на первых этапах может быть упрощён).

### Некритичные / вспомогательные сервисы

- `notifications` — если он временно не работает:
  - система продолжает функционировать,
  - заказы можно создавать,
  - товары просматривать,
  - пользователи авторизуются,
  - просто уведомления не отправляются.

---

## Итог

В рамках этого проекта будет реализована микросервисная архитектура из 6 сервисов.  
Основная цель — сделать так, чтобы при выходе из строя одного из некритичных сервисов (например, `notifications`) система продолжала работать "как обычно", просто без части функциональности.
